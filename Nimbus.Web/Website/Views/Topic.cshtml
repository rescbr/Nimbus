@model Nimbus.Web.Website.Models.TopicModel
@{
    Layout = "~/Website/Views/Shared/_Layout.cshtml";
    ViewBag.Title = "Topico";
}

@Scripts.Render("~/Scripts/ScriptsShared.js")
@Scripts.Render("~/Scripts/ViewChannelScripts.js")
@Scripts.Render("~/Scripts/ViewTopicScripts.js")

<div id="divCapa">
    <img src="@Model.Category.ImgTopChannel" id="imgcapa" height="192" alt="" width="864" />
</div>


<div id="divInfTopic" style="margin: -30px 20px 0px 20px; float:left; width: 200px;">

    <div style="width: 150px; margin: 0 auto;">
        <img src="@Model.CurrentTopic.ImgUrl " id="imgTopic" height="100" alt="" width="150" />
    </div>

    <h1 style="text-align: center; margin-top:5px;">
        @Model.CurrentTopic.Title - @Model.CurrentChannel.Name
    </h1>
    <p>@Model.CurrentTopic.Description</p>
    <button id="btnEditTopic" onclick="EditTopic();">Editar</button>

    <h1 style="margin: 20px 10px 20px 10px;">
        <img src="/images/favorite_topic_icon.png" style="margin: 0px 0px -5px 10px;" />
        @Model.NumFavorites
    </h1>

    <p style="text-align: center; border: solid;">
        @*Categoria*@
        @Model.Category.Name
    </p>

    <div id="divCanaisRelacionados">
        @*TODO*@
    </div>
</div>


<div id="divContentTopic" style="float:right; width: 600px;">

    @*Topico em formato texto*@
    @if (Model.CurrentTopic.TopicType == Nimbus.Model.Enums.TopicType.exam)
    {
        @RenderPage("~/Website/Views/TopicAvalicao.cshtml")
    }
    else if (Model.CurrentTopic.TopicType == Nimbus.Model.Enums.TopicType.video)
    {
        @*Topico em formato de video*@
        @RenderPage("~/Website/Views/TopicVideo.cshtml")
    }
    else
    {
        @*Topico avaliacao*@
        @RenderPage("~/Website/Views/TopicText.cshtml")
    }



</div>

@if (Model.CurrentChannel.OpenToComments == true)
{
    <script type="text/javascript">
        nimbusRegisterTopic = Number(@Model.CurrentTopic.Id);
    </script>
    <div id="divCommentsTopic">
        <br />
        <h2>Comentários</h2>
        <div id="divAllComments" style="float:right">
            @{ Html.RenderAction("Comments", "Topic", new { id = Model.CurrentTopic.Id }); }
            @* renato: favor deixar essa div aqui, tks. *@
            <div id="placeholderAfterLastComment"></div>
        </div>

        <div id="divAddNewComment" style="float:right">
            <br /><br />
            <h2 style="margin-bottom:5px;">Comentar</h2>
            <textarea id="txtacomentario" cols="50" rows="5"></textarea>
            <input type="submit" id="btnNewComment" onclick="ajaxSaveNewComment(@Model.CurrentTopic.Id, @Model.CurrentTopic.ChannelId,'txtacomentario');" value="Enviar" />
        </div>

    </div>
}
